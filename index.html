<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vapi AI Assistant</title>
    <style>
        #assistant-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full viewport height */
            width: 100vw;  /* Full viewport width */
        }
    </style>
</head>
<body>
    <div id="assistant-container">
        <!-- The button will be dynamically inserted here by the script -->
    </div>

    <script>
        var vapiInstance = null;

        function getQueryParam(param) {
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        const apiKey = getQueryParam('apiKey') || 'default-api-key';
        const assistant = getQueryParam('assistant') || 'default-assistant-id';

        const buttonConfig = {
            position: "absolute",  // Using absolute for manual positioning via CSS
            offset: "0",  // No offset, centering will be handled by CSS
            width: "50px", 
            height: "50px",
            idle: {
                color: `rgb(93, 254, 202)`,
                type: "round",
                icon: `https://unpkg.com/lucide-static@0.321.0/icons/phone.svg`,
            },
            loading: {
                color: `rgb(93, 124, 202)`,
                type: "round",
                icon: `https://unpkg.com/lucide-static@0.321.0/icons/loader-2.svg`,
            },
            active: {
                color: `rgb(255, 0, 0)`,
                type: "round",
                icon: `https://unpkg.com/lucide-static@0.321.0/icons/phone-off.svg`,
            },
        };

        (function (d, t) {
            var g = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
            g.src = "https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js";
            g.defer = true;
            g.async = true;
            s.parentNode.insertBefore(g, s);
            g.onload = function () {
                vapiInstance = window.vapiSDK.run({
                    apiKey: apiKey,
                    assistant: assistant,
                    config: buttonConfig,
                });
            };
        })(document, "script");
    </script>
</body>
</html>
